---
import Layout from "@/layouts/Layout.astro";
import Hero from "@/assets/Imagenes/Heros/Becas.webp";
import Cover from "@/assets/Imagenes/Middles/Sillas.webp";
import criterios from "@/assets/Imagenes/Secciones/Becas.webp"
import { Check } from "@lucide/astro";
---

<Layout>
  <!-- Hero Section -->
  <section
    class="apoyos-bg relative min-h-[65vh] overflow-hidden bg-cover bg-center bg-no-repeat flex items-center justify-center"
  >
    <div
      class="relative z-10 container mx-auto px-4 h-full min-h-[85vh] md:min-h-[65vh] flex flex-col justify-center"
    >
      <div class="text-white max-w-2xl relative">
        <!-- Badge decorativo tipo banderín -->
        <div class="absolute top-72 left-8 ">
          <div class="relative">
            <!-- Banderín principal -->
            <div
              class="bg-gradient-to-r from-red-500 to-red-600 text-white px-6 py-3 rounded-lg shadow-lg transform"
            >
              <div class="text-center">
                <div class="text-sm font-semibold">Próxima Convocatoria</div>
                <div class="text-lg font-bold">2025 - Agosto</div>
              </div>
            </div>
            <!-- Cola del banderín -->
            <div
              class="absolute right-0 top-1/2 transform translate-x-full -translate-y-1/2"
            >
              <div
                class="w-0 h-0 border-t-[15px] border-t-transparent border-b-[15px] border-b-transparent border-l-[15px] border-l-red-600"
              >
              </div>
            </div>
            <!-- Brillo decorativo -->
            <div
              class="absolute top-1 left-1 w-4 h-4 bg-white bg-opacity-20 rounded-full"
            >
            </div>
          </div>
        </div>

        <h1 class="text-4xl md:text-6xl font-bold mb-4 leading-tight">
          Programas Académicos
        </h1>
        <p class="text-lg md:text-xl mb-8 leading-relaxed font-light">
          Reconocemos tu excelencia académica con apoyos educativos que hacen la
          diferencia. Conoce nuestro programa y prepárate para la próxima
          convocatoria
        </p>
      </div>
    </div>
  </section>

  <!-- No solo es una beca Section -->
  <section class="py-16 bg-gray-50">
    <div class="container mx-auto px-4">
      <div class="grid md:grid-cols-2 gap-12 items-center">
        <div>
          <h2 class="text-4xl font-bold text-gray-800 mb-6">
            No solo es una beca es
          </h2>
          <p class="text-gray-600 text-lg leading-relaxed">
            Es el reconocimiento a tu dedicación y esfuerzo académico. Nuestro
            programa de apoyos educativos va más allá del descuento económico:
            es una inversión en tu futuro profesional y personal. Creemos en el
            poder transformador de la educación y confiamos de que en UNE
            valoramos a los estudiantes comprometidos con su formación. Porque
            sabemos que quienes se esfuerzan por destacar merecen el respaldo
            para alcanzar sus metas.
          </p>
        </div>
        <div class="flex justify-center">
          <img
            src="/src/assets/Imagenes/Secciones/Water.webp"
            alt="Estudiante graduada"
            class="rounded-lg shadow-lg"
          />
        </div>
      </div>
    </div>
  </section>

  <!-- Apoyos Disponibles Section -->
  <section class="py-16 bg-white">
    <div class="container mx-auto px-4">
      <section class="py-16 bg-white">
        <div class="container mx-auto px-4">
          <section class="py-16 bg-white">
            <div class="container mx-auto px-4">
              <div class="max-w-6xl mx-auto">
                <div class="text-center mb-8">
                  <h1 class="text-3xl font-bold text-gray-800 mb-2">
                    Apoyos Disponibles por Modalidad
                  </h1>
                  <p class="text-gray-600">
                    Descubre las oportunidades que UNE tiene para ti
                  </p>
                </div>

                <div class="bg-white">
                  <!-- Primera fila: 3 elementos en desktop, 1 columna en mobile -->
                  <div
                    class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-0"
                  >
                    <!-- Modalidad Matutina -->
                    <div
                      class="bg-white border-t-2 border-b-2 md:border-b-2 md:border-r-2 border-gray-400 p-6 hover:shadow-lg transition-shadow"
                    >
                      <div class="text-red-600 font-bold text-lg mb-2">
                        / 01
                      </div>
                      <h3 class="text-xl font-bold text-gray-800 mb-4">
                        Modalidad Matutina
                      </h3>
                      <p class="text-gray-600">
                        Apoyo del 15% durante el primer ciclo para estudiantes
                        de nuevo ingreso que mantengan excelencia académica.
                      </p>
                    </div>

                    <!-- Programa de Excelencia -->
                    <div
                      class="bg-white border-t-2 border-b-2 md:border-r-2 md:border-b-2 lg:border-r-2 border-gray-400 p-6 hover:shadow-lg transition-shadow"
                    >
                      <div class="text-red-600 font-bold text-lg mb-2">
                        / 02
                      </div>
                      <h3 class="text-xl font-bold text-gray-800 mb-4">
                        Programa de Excelencia Continua
                      </h3>
                      <p class="text-gray-600">
                        Modalidades Matutina y En Línea reciben 30% de apoyo
                        durante todo el programa académico.
                      </p>
                    </div>

                    <!-- Modalidad Sabatina -->
                    <div
                      class="bg-white border-t-2 border-b-2 md:border-b-2 border-gray-400 p-6 hover:shadow-lg transition-shadow"
                    >
                      <div class="text-red-600 font-bold text-lg mb-2">
                        / 03
                      </div>
                      <h3 class="text-xl font-bold text-gray-800 mb-4">
                        Modalidad Sabatina y En Línea
                      </h3>
                      <p class="text-gray-600">
                        Apoyo del 15% en el primer ciclo, diseñado para
                        estudiantes que balancean trabajo y estudios.
                      </p>
                    </div>
                  </div>

                  <!-- Segunda fila: 2 elementos al 50% en desktop, 1 columna en mobile -->
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-0">
                    <!-- Incentivo por Revalidación -->
                    <div
                      class="bg-white border-t-2 border-b-2 md:border-r-2 border-gray-400 p-6 hover:shadow-lg transition-shadow"
                    >
                      <div class="text-red-600 font-bold text-lg mb-2">
                        / 04
                      </div>
                      <h3 class="text-xl font-bold text-gray-800 mb-4">
                        Incentivo por Revalidación
                      </h3>
                      <p class="text-gray-600">
                        Apoyo adicional del 5% durante el primer ciclo para
                        estudiantes que revaliden estudios previos.
                      </p>
                    </div>

                    <!-- Renovación por Mérito -->
                    <div
                      class="bg-white border-b p-6 hover:shadow-lg transition-shadow"
                    >
                      <div class="text-red-600 font-bold text-lg mb-2">
                        / 05
                      </div>
                      <h3 class="text-xl font-bold text-gray-800 mb-4">
                        Renovación por Mérito
                      </h3>
                      <p class="text-gray-600">
                        El apoyo se mantiene cumpliendo con promedio mínimo de
                        8.5, puntualidad en pagos y regularidad académica.
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>
      </section>
    </div>
  </section>

  <!-- Criterios de Elegibilidad Section -->
  <section class="py-16 bg-gray-50">
    <div class="container mx-auto px-4">
      <div class="text-center mb-12">
        <h2 class="text-4xl font-bold text-gray-800 mb-8">
          Criterios de Elegibilidad
        </h2>
      </div>

      <div class="grid md:grid-cols-2 gap-12 items-center">
        <div class="flex justify-center">
          <img
            src={criterios.src}
            alt="Criterios de elegibilidad"
            class="w-92 h-auto rounded-lg"
          />
        </div>
        <div class="space-y-6">
          <div class="flex items-center space-x-4">
            <div
              class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center"
            >
              <Check class="w-4 h-4 text-white" />
            </div>
            <span class="text-lg text-gray-700">Promedio mínimo de 8.5</span>
          </div>
          <div class="flex items-center space-x-4">
            <div
              class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center"
            >
              <Check class="w-4 h-4 text-white" />
            </div>
            <span class="text-lg text-gray-700"
              >Mantener regularidad académica</span
            >
          </div>
          <div class="flex items-center space-x-4">
            <div
              class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center"
            >
              <Check class="w-4 h-4 text-white" />
            </div>
            <span class="text-lg text-gray-700"
              >Cumplimiento puntual de colegiaturas</span
            >
          </div>
          <div class="flex items-center space-x-4">
            <div
              class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center"
            >
              <Check class="w-4 h-4 text-white" />
            </div>
            <span class="text-lg text-gray-700"
              >Sin exámenes extraordinarios</span
            >
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Cómo Solicitar tu Evaluación Section -->
  <section class="py-16 bg-white">
    <div class="container mx-auto px-4">
      <div class="text-center mb-12">
        <h2 class="text-4xl font-bold text-gray-800 mb-4">
          Cómo Solicitar tu Evaluación
        </h2>
        <p class="text-xl text-gray-600">
          Sigue estos sencillos pasos para aplicar a nuestro programa de apoyos
          educativos
        </p>
      </div>

      <div class="grid md:grid-cols-4 gap-8">
        <!-- Paso 1: Consulta -->
        <div class="text-center">
          <div
            class="w-16 h-16 bg-red-600 rounded-full flex items-center justify-center mx-auto mb-4"
          >
            <span class="text-white font-bold text-xl">1</span>
          </div>
          <h3 class="text-xl font-bold text-gray-800 mb-2">Consulta</h3>
          <p class="text-gray-600">Verifica si cumples los requisitos</p>
        </div>

        <!-- Paso 2: Documentación -->
        <div class="text-center">
          <div
            class="w-16 h-16 bg-red-600 rounded-full flex items-center justify-center mx-auto mb-4"
          >
            <span class="text-white font-bold text-xl">2</span>
          </div>
          <h3 class="text-xl font-bold text-gray-800 mb-2">Documentación</h3>
          <p class="text-gray-600">Presenta comprobantes académicos</p>
        </div>

        <!-- Paso 3: Evaluación -->
        <div class="text-center">
          <div
            class="w-16 h-16 bg-red-600 rounded-full flex items-center justify-center mx-auto mb-4"
          >
            <span class="text-white font-bold text-xl">3</span>
          </div>
          <h3 class="text-xl font-bold text-gray-800 mb-2">Evaluación</h3>
          <p class="text-gray-600">Nuestro equipo revisa tu solicitud</p>
        </div>

        <!-- Paso 4: Resultado -->
        <div class="text-center">
          <div
            class="w-16 h-16 bg-red-600 rounded-full flex items-center justify-center mx-auto mb-4"
          >
            <span class="text-white font-bold text-xl">4</span>
          </div>
          <h3 class="text-xl font-bold text-gray-800 mb-2">Resultado</h3>
          <p class="text-gray-600">Conoce tu aprobación en 48 horas</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Sección de Notificaciones -->
  <section
    class="py-16 bg-cover bg-center bg-no-repeat relative"
    style={`background-image: url(${Cover.src})`}
  >
    <div class="container mx-auto px-4 relative z-10">
      <div
        class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center text-white"
      >
        <div>
          <h2 class="text-3xl sm:text-4xl font-bold text-white mb-6">
            ¿Quieres ser notificado de la próxima convocatoria?
          </h2>
        </div>
        <form id="notification-form" class="space-y-4">
          <!-- En mobile: inputs en columna uno debajo del otro -->
          <div class="flex flex-col gap-4">
            <input
              type="text"
              name="nombre"
              placeholder="Nombre"
              required
              class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-red-500 text-gray-800"
            />
            <input
              type="text"
              name="apellidos"
              placeholder="Apellidos"
              required
              class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-red-500 text-gray-800"
            />
            <input
              type="email"
              name="correo"
              placeholder="Correo electrónico"
              required
              class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-red-500 text-gray-800"
            />
            <input
              type="tel"
              name="telefono"
              placeholder="Celular"
              required
              class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-red-500 text-gray-800"
            />
          </div>
          <button
            type="submit"
            id="notification-btn"
            class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
            aria-label="Registrar Interés" 
            title="Registrar Interés"
          >
            <span class="btn-text">Registrar Interés</span>
            <span class="btn-loading hidden">Enviando...</span>
          </button>
        </form>
      </div>
    </div>
  </section>
</Layout>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Notification form functionality
    const notificationForm = document.getElementById('notification-form');
    const submitBtn = document.getElementById('notification-btn');
    const btnText = submitBtn.querySelector('.btn-text');
    const btnLoading = submitBtn.querySelector('.btn-loading');

    if (notificationForm && submitBtn) {
      notificationForm.addEventListener('submit', async function(e) {
        e.preventDefault();

        // Get form data
        const formData = new FormData(notificationForm);
        const nombre = formData.get('nombre').trim();
        const apellidos = formData.get('apellidos').trim();
        const correo = formData.get('correo').trim();
        const telefono = formData.get('telefono').trim();

        // Basic validation
        if (!nombre || !apellidos || !correo || !telefono) {
          alert('Por favor completa todos los campos');
          return;
        }

        // Email validation
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(correo)) {
          alert('Por favor ingresa un correo electrónico válido');
          return;
        }

        // Split apellidos into apellido_p and apellido_m
        const apellidosParts = apellidos.split(' ');
        const apellido_p = apellidosParts[0] || '';
        const apellido_m = apellidosParts[1] || 'Pendiente';

        // Disable button and show loading
        submitBtn.disabled = true;
        btnText.classList.add('hidden');
        btnLoading.classList.remove('hidden');

        try {
          const requestData = {
            "nombre": nombre,
            "apellido_p": apellido_p,
            "apellido_m": apellido_m,
            "correo": correo,
            "nivel_educativo": "Pendiente",
            "plantel_interes": "Pendiente",
            "programa_interes": "Pendiente",
            "telefono": telefono,
            "modalidad": "Pendiente"
          };

          const response = await fetch('https://www.universidad-une.com/api/v2/custom/une_create_crm', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'Authorization': 'Basic b3NjYXIubXVyb0B4bWFydHMuY29tOkxlZHhPc2Nhck11cm8='
            },
            body: JSON.stringify(requestData)
          });

          if (response.ok) {
            // Redirect to thank you page without showing any alert
            window.location.href = '/contacto/gracias';
          } else {
            throw new Error(`Error ${response.status}`);
          }

        } catch (error) {
          alert('Hubo un error al enviar tu mensaje. Por favor intenta nuevamente.');
          
          // Re-enable button
          submitBtn.disabled = false;
          btnText.classList.remove('hidden');
          btnLoading.classList.add('hidden');
        }
      });
    }
  });
</script>

<style>
  .apoyos-bg {
    background-image: url("/src/assets/Imagenes/Heros/Becas.webp");
  }

  @media (max-width: 767px) {
    .apoyos-bg {
      background-image: url("/src/assets/Imagenes/Heros/Becas_mobile.webp");
    }
  }
</style>